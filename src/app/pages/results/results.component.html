<div class="results-page container">
    <section class="results">
        <div class="results__filter-desktop">
            <div class="desktop__timeline">
                <app-timeline></app-timeline>
            </div>
            <div class="desktop__location">
                <app-select-location></app-select-location>
            </div>
            <div *ngIf="this.results.length !== 1">
                <div class="desktop__buscador">
                    <!-- BUSCADOR -->
                    <div class="main-search container">
                        <form>
                            <input type="text" class="main-search__input" id="main-search"
                                placeholder="Buscar en los resultados" [(ngModel)]="filterResult" name="filterResult">
                        </form>
                    </div>
                    <!-- buscador -->
                </div>
            </div>
        </div>
        <h2 class="results__title">Resultados de la búsqueda. Encontrados <u>{{this.results.length}} resultados
                entre {{this.firstYear}} y {{this.lastYear}}:</u>
        </h2>
        <div class="results__filter">
            <div class="results__filter-menu" (click)="toggleSidebar()">
                <mat-icon>reorder</mat-icon>
                <p>Filtrar</p>
            </div>
            <div class="results__filter-order" (click)="sortResults(pageOfItems)">
                <mat-icon>swap_vert</mat-icon>
                <p>Orden <span *ngIf="sortByName">A - Z</span><span *ngIf="!sortByName">Z - A</span></p>
            </div>
        </div>
        <div class="loading" *ngIf="this.results.length === 1">
            <mat-spinner [diameter]="70"></mat-spinner>
            <p>Obteniendo datos</p>
        </div>
        <div *ngFor="let result of pageOfItems | filter:filterResult" class="search__results">
            <article class="search__results-item">
                <p class="item__category">{{result.category}}</p>
                <a href="{{result.resultURL}}" target="_blank" class="item__title">
                    <mat-icon>open_in_new</mat-icon>
                    <h3>{{result.title}}</h3>
                </a>
            </article>

        </div>
        <div *ngIf="this.items.length !== 1 " class="results__pagination">
            <jw-pagination [items]="items" (changePage)="onChangePage($event)"></jw-pagination>
        </div>
    </section>

    <section class="sidebar" [ngClass]="{'active': active}">
        <div class="sidebar__cerrar" (click)="toggleSidebar()">
            <mat-icon>close</mat-icon> <span>Cerrar filtros</span>
        </div>
        <div class="sidebar__timeline">
            <app-timeline></app-timeline>
        </div>
        <div class="sidebar__location">
            <app-select-location></app-select-location>
        </div>
        <div class="sidebar__buscador">
            <app-search></app-search>
        </div>
        <div class="sidebar__categories">
            <h3 class="sidebar__categories-title">Categorías</h3>
            <ul *ngFor="let tema of temasParsed">
                <li>
                    <mat-icon>chevron_right</mat-icon><a (click)="filterByCategory(tema.title)"
                        [routerLink]="['/results/', tema.title]">{{tema.title}}</a>
                </li>
            </ul>

            <h3 class="sidebar__categories-title">Tipos</h3>
            <ul>
                <li>
                    <mat-icon>chevron_right</mat-icon><a href="">Lugar</a>
                </li>
                <li>
                    <mat-icon>chevron_right</mat-icon><a href="">Persona</a>
                </li>
                <li>
                    <mat-icon>chevron_right</mat-icon><a href="">Organización</a>
                </li>
                <li>
                    <mat-icon>chevron_right</mat-icon><a href="">Temas</a>
                </li>
            </ul>

        </div>
    </section>
</div>