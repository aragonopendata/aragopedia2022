<ng-container>
    <div class="container template">
        <section class="container breadcrumbs">
            <p><span [routerLink]="['/']">Inicio</span> > Comunidad >
                Aragón</p>
        </section>
        <section class="container container template__inicio">
            <div class="inicio__img">
                <h1 class="inicio__name">Aragón</h1>
                <a href={{this.urlMap}} target="_blank">
                    <img *ngIf="this.map" src={{this.map}} alt="Mapa de {{this.lugarBuscado}}">
                </a>
                <a href={{this.urlMap}} target="_blank" class="btn map_btn">Ver en el mapa</a>
            </div>
            <div class="inicio__data inicio__data-aragon">
                <ul>
                    <li *ngIf="this.sueloUrbano"><a href="{{dataSource.sueloUrbano}}" target="_blank">
                            <mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.sueloUrbano)}}</span>Hectáreas de suelo
                            urbano ({{dataYearExtension}})</a></li>
                    <li *ngIf="this.sueloRural"><a href="{{dataSource.sueloRural}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.sueloRural)}}</span>Hectáreas de suelo
                            rural ({{dataYearExtension}})</a></li>
                    <li *ngIf="this.oficinasComarcales"><a href="{{dataSource.edificiosDestinadosLocales}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.oficinasComarcales)}}</span>Edificios destinados a
                            locales (2011)</a></li>
                    <li *ngIf="this.poblacion"><a href="{{dataSource.habitantes}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.poblacion)}}</span>Habitantes ({{yearPoblacion}})</a>
                    </li>

                    <li *ngIf="this.poligonos"><a href="{{dataSource.poligonos}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.poligonos)}}</span></a>Polígonos industriales
                    </li>

                    <li *ngIf="this.incendiosUltimosAnos"><a href="{{dataSource.incendios}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{this.incendiosUltimosAnos}}</span>Incendios desde 2001</a></li>
                    <li *ngIf="this.hectareasQuemadas"><a href="{{dataSource.hectareasAfectadas}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.hectareasQuemadas)}}</span>Hectáreas afectadas por
                            incendios desde 2001</a></li>
                    <li *ngIf="this.numberOfCreativeWork"><a href="{{dataSource.publicaciones}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.numberOfCreativeWork)}}</span>Menciones de
                            publicaciones</a></li>
                    <li *ngIf="this.plazasHoteleras"><a href="{{dataSource.alojamientosHoteleros}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.plazasHoteleras)}}</span>Alojamientos
                            hoteleros</a></li>
                    <li *ngIf="this.alojamientosTuristicos"><a href="{{dataSource.alojamientosRurales}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.alojamientosTuristicos)}}</span>Alojamientos
                            de turismo rural</a>
                    </li>
                    <li *ngIf="this.municipiosEnTerritorio > 0"><a href="{{dataSource.municipios}}"
                            target="_blank"><mat-icon>open_in_new</mat-icon><span
                                class="big-number">{{format(this.municipiosEnTerritorio)}}</span>Municipios en
                            el territorio</a>
                    </li>
                </ul>

            </div>
            <div class="inicio__contact">
                <h2>Contacto</h2>
                <ul>
                    <li *ngIf="this.direccion"><b>Dirección</b> {{this.direccion}}</li>
                    <li *ngIf="this.codPostal"><b>Código postal</b> {{this.codPostal}}</li>
                    <li *ngIf="this.telefono"><b>Teléfono</b> <a href="tel:{{this.telefono}}">{{this.telefono}}</a></li>
                    <li *ngIf="this.email"><b>email</b> <a href="mailto:{{this.email}}">{{this.email}}</a></li>
                </ul>
                <a class="data-link" href="{{dataSource.datosContacto}}" target="_blank">Ver origen de los datos</a>
                <div class="template__img-municipio" *ngIf="this.imageWikiDataUrl">
                    <div class="loading" *ngIf="!this.imageWikiDataUrl">
                        <mat-spinner [diameter]="50"></mat-spinner>
                    </div>
                    <figure>
                        <a href="{{this.imageWikiDataUrl}}" target="_blank" rel="nofollow noopener"><img
                                src="{{this.imageWikiDataUrl}}" alt="Imagen principal de {{this.lugarBuscado}}"></a>
                        <figcaption>Imagen <a href="{{dataSource.image}}" target="_blank">obtenida de WikiData</a>. Este
                            archivo está disponible bajo la licencia <a
                                href="https://en.wikipedia.org/wiki/es:Creative_Commons" target="_blank"
                                rel="nofollow noopener">Creative Commons</a> <a
                                href="https://creativecommons.org/licenses/by/4.0/deed.es" target="_blank"
                                rel="nofollow noopener">
                                Atribución 4.0
                                Internacional
                            </a>
                        </figcaption>
                    </figure>
                </div>
                <div class="download">
                    <button class="btn btn-download" type="button" (click)="fileDownload()">DESCARGAR FICHA</button>
                </div>
            </div>
        </section>

        <section class="container template__caracteristicas">
            <h2>Características de Aragón</h2>
            <div class="caracteristicas__list">
                <a href="{{dataSource.densidad}}" target="_blank">
                    <div class="caracteristica__item">
                        <mat-icon>people</mat-icon> La densidad de población de <b>Aragón</b> es de
                        {{this.densidadPoblacion}} habitantes por km<sup>2</sup>
                    </div>
                </a>
                <a href="{{dataSource.edadMedia}}" target="_blank">
                    <div class="caracteristica__item">
                        <mat-icon>person</mat-icon> La edad media de los <b>hombres</b> es de {{this.edadMediaHombres}}
                        años ({{yearEdadMedia}})
                    </div>
                </a>
                <a href="{{dataSource.edadMedia}}" target="_blank">
                    <div class="caracteristica__item">
                        <mat-icon>person</mat-icon> La edad media de las <b>mujeres</b> es de {{this.edadMediaMujeres}}
                        años ({{yearEdadMedia}})
                    </div>
                </a>
            </div>
        </section>

     
        <section class="container template__graphics">
            <div class="graphics__item poblacion" style="width: 100%;">
                <div class="tabla">
                    <h2>Últimos datos de Población</h2>
                    <div class="tabla-container">
                        <table class="tabla-poblacion">
                            <tr>
                                <th>Año</th>
                                <td *ngFor="let year of yearsTablaPoblacion"><span>{{year}}</span></td>
                            </tr>
                            <tr>
                                <th>{{this.comunidad[0]}}</th>
                                <td *ngFor="let element of tablaPoblacion">
                                    <span *ngIf="element.nameRefArea.value == this.comunidad[0]">
                                        {{format(element.poblac.value)}}
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="grafica">
                    <div class="grafica-poblacion">
                        <h2>Gráfica de los últimos 5 años</h2>
                        <canvas baseChart class="chart" [data]="lineChartData" [options]="lineChartOptions"
                            [type]="lineChartType"></canvas>
                    </div>
                    <a class="data-link" href="{{dataSource.tablaPoblacion}}" target="_blank">Ver origen de los
                        datos</a>
                </div>
            </div>

            <div class="graphics__item presupuestos" *ngIf="presupuestos">
                <h2>Información sobre presupuestos</h2>
                <a href="{{presupuestos}}" target="_blank"
                    class="btn btn-presupuestos"><mat-icon>open_in_new</mat-icon>Ver información de
                    presupuestos</a>
                <a class="data-link" href="{{dataSource.presupuestos}}" target="_blank">Ver origen de los datos</a>
            </div>

            <div class="graphics__item" fragment="creative-works">
                <div class="graphics__item-cw">
                    <h2>Enlaces de interés</h2>
                    <p class="big-number"><b>
                            Menciones en publicaciones:</b> {{this.numberOfCreativeWork}} (Mostrando las
                        últimas 10 publicaciones)</p>
                </div>
                <div class="slides">
                    <mat-tab-group mat-align-tabs="start">
                        <mat-tab *ngFor="let link of creativeWork" label="{{link.title.value}}">
                            <span class="slides__tema">
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/turismo'"
                                    href="/results/Turismo">Turismo</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/educacion'"
                                    href="/results/Educacion">Educación</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/ciencia-tecnologia'"
                                    href="/results/Ciencia%20y%20Tecnología">Ciencia y Tecnología</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/empleo'"
                                    href="/results/Empleo">Empleo</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/economia'"
                                    href="/results/Economia">Economía</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/sector-publico'"
                                    href="/results/Sector%20público">Sector Público</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/salud'"
                                    href="/results/Salud">Salud</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/cultura-ocio'"
                                    href="/results/">Cultura y Ocio</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/sociedad-bienestar'"
                                    href="/results/">Sociedad y Bienestar</a>
                                <a *ngIf="
                                link.tema.value==='http://datos.gob.es/kos/sector-publico/sector/medio-ambiente'"
                                    href="/results/">Medio Ambiente</a>
                            </span>
                            <p class="slides__abstract" *ngIf="leerMas">{{link.resumen.value}} <span class="leer-mas"
                                    (click)="this.leerMas = !this.leerMas"
                                    (keyup.enter)="this.leerMas = !this.leerMas"
                                    (keyup.space)="this.leerMas = !this.leerMas"
                                    tabindex="0" >Reducir resumen</span></p>
                            <p class=" slides__abstract" *ngIf="leerMas === false">
                                {{this.reduceText(link.resumen.value)}}... <span class="leer-mas"
                                    (click)="this.leerMas = !this.leerMas"
                                    (keyup.enter)="this.leerMas = !this.leerMas"
                                    (keyup.space)="this.leerMas = !this.leerMas"
                                    tabindex="0" >Ver resumen completo</span></p>


                            <a href="{{link.url.value}}" target="_blank" class="slide__link">Leer más</a>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>

            <div class="graphics__item miembros" *ngIf="this.cantidadMiembrosPleno !== 0">
                <h2>Miembros del Gobierno de Aragón</h2>
                <ul>
                    <li *ngFor="let miembro of this.miembrosPleno"><b>{{miembro.orgTitle.value}}: </b>
                        <a
                            [routerLink]="['/persona/', this.createNameForUrl(miembro.persona.value)]">{{miembro.nombre.value}}</a>
                    </li>
                </ul>
                <a class="data-link" href="{{dataSource.miembrosPleno}}" target="_blank">Ver origen de los datos</a>
            </div>
        </section>

        <section class="container template__statistics">
            <h2>Encuentra los datos estadísticos de {{this.lugarBuscado}}</h2>
            <form [formGroup]="formGroup">
                <div class="selector-temas">
                    <mat-form-field class="temas">
                        <mat-label>
                            Seleccionar datos
                        </mat-label>
                        <input formControlName="tema" [(ngModel)]="selectedTema" matInput [formControl]="temasControl"
                            type="select" [matAutocomplete]="auto" />
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let tema of filteredTemas" 
                                (click)="temaSelected(tema)"
                                (keyup)="temaSelected(tema)"
                                [value]="tema.nombre.value">
                                {{tema.nombre.value}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            </form>
            <div>
                <h3 class="datos-seleccionados" [ngClass]="{'hidden': this.displayTema === ''}"><b>Datos
                        seleccionados:</b><br>
                    <span class="underline">{{displayTema}}</span>
                </h3>
                <p [ngClass]="{'errorTabla' : !this.errorTabla}">No se encontraron datos</p>
                <div class="loading" *ngIf="loading">
                    <mat-spinner [diameter]="70"></mat-spinner>
                </div>
                <app-aragopedia-tabla-datos
                    [ngClass]="{'errorTabla' : this.errorTabla, 'hidden': this.displayTema === '' || loading}"
                    class="tabla-datos">
                </app-aragopedia-tabla-datos>
            </div>
        </section>

    </div>
    <div class="return">
        <button class="btn return__btn" [routerLink]="['/']"><mat-icon>keyboard_arrow_left</mat-icon><span
                class="return__text">Nueva búsqueda</span></button>
    </div>
</ng-container>